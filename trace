warning: Git tree '/home/eulalia/flake' is dirty
trace: evaluated let side of module default
trace: established modules import in default
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: default.nix
trace: regular
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/helpers.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: helpers.nix
trace: regular
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/hosts.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: hosts.nix
trace: regular
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/modules.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: modules.nix
trace: regular
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/options.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: options.nix
trace: regular
trace: path: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/users.nix toIgnore: /nix/store/pkiz9i72sqms1ypzx2pv0096rmfh3pf1-source/lib/default.nix
trace: users.nix
trace: regular
trace: { "helpers.nix" = <CODE>; "hosts.nix" = <CODE>; "modules.nix" = <CODE>; "options.nix" = <CODE>; "users.nix" = <CODE>; }
trace: reached end of let in mapmodules
trace: mapHosts called: /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts
trace: valid entries to be mapped as hosts in /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts:  thinkpad
trace: mapped over the valid entries to generate these paths:  /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad
trace: mapping some function onto /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad in mapHosts call over /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts
trace: importing host: /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad
building the system configuration...
warning: Git tree '/home/eulalia/flake' is dirty
trace: evaluated let side of module default
trace: established modules import in default
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: default.nix
trace: regular
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/helpers.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: helpers.nix
trace: regular
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/hosts.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: hosts.nix
trace: regular
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/modules.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: modules.nix
trace: regular
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/options.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: options.nix
trace: regular
trace: path: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/users.nix toIgnore: /nix/store/2i8hz0yyq0vjpfkkkk3fb1h66k9mqsms-source/lib/default.nix
trace: users.nix
trace: regular
trace: { "helpers.nix" = <CODE>; "hosts.nix" = <CODE>; "modules.nix" = <CODE>; "options.nix" = <CODE>; "users.nix" = <CODE>; }
trace: reached end of let in mapmodules
trace: mapHosts called: /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts
trace: valid entries to be mapped as hosts in /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts:  thinkpad
trace: mapped over the valid entries to generate these paths:  /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad
trace: mapping some function onto /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad in mapHosts call over /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts
trace: importing host: /nix/store/2w693crv6l8f0cpx457bigzdb9qylkdg-hosts/thinkpad
error:
       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:918:24:

          917|     let f = attrPath:
          918|       zipAttrsWith (n: values:
             |                        ^
          919|         let here = attrPath ++ [n]; in

       … while calling 'g'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:701:19:

          700|           g =
          701|             name: value:
             |                   ^
          702|             if isAttrs value && cond value

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:704:20:

          703|               then recurse (path ++ [name]) value
          704|               else f (path ++ [name]) value;
             |                    ^
          705|         in mapAttrs g;

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:242:72:

          241|           # For definitions that have an associated option
          242|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          243|

       … while evaluating the option `system.build.toplevel':

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:822:28:

          821|         # Process mkMerge and mkIf properties.
          822|         defs' = concatMap (m:
             |                            ^
          823|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while evaluating definitions from `/nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/nixos/modules/system/activation/top-level.nix':

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:823:137:

          822|         defs' = concatMap (m:
          823|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                                                                         ^
          824|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:894:25:

          893|   */
          894|   dischargeProperties = def:
             |                         ^
          895|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/nixos/modules/system/activation/top-level.nix:71:12:

           70|   # Replace runtime dependencies
           71|   system = foldr ({ oldDependency, newDependency }: drv:
             |            ^
           72|       pkgs.replaceDependency { inherit oldDependency newDependency drv; }

       … while calling 'foldr'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:53:20:

           52|   */
           53|   foldr = op: nul: list:
             |                    ^
           54|     let

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:60:8:

           59|         else op (elemAt list n) (fold' (n + 1));
           60|     in fold' 0;
             |        ^
           61|

       … while calling 'fold''

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:56:15:

           55|       len = length list;
           56|       fold' = n:
             |               ^
           57|         if n == len

       … while calling 'g'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:701:19:

          700|           g =
          701|             name: value:
             |                   ^
          702|             if isAttrs value && cond value

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:704:20:

          703|               then recurse (path ++ [name]) value
          704|               else f (path ++ [name]) value;
             |                    ^
          705|         in mapAttrs g;

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:242:72:

          241|           # For definitions that have an associated option
          242|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          243|

       … while evaluating the option `assertions':

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:822:28:

          821|         # Process mkMerge and mkIf properties.
          822|         defs' = concatMap (m:
             |                            ^
          823|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while evaluating definitions from `/nix/store/n2hszn7p77406si50ghhzdxglc794262-source/nixos/common.nix':

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:823:137:

          822|         defs' = concatMap (m:
          823|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                                                                         ^
          824|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:894:25:

          893|   */
          894|   dischargeProperties = def:
             |                         ^
          895|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:900:11:

          899|         if def.condition then
          900|           dischargeProperties def.content
             |           ^
          901|         else

       … while calling 'dischargeProperties'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:894:25:

          893|   */
          894|   dischargeProperties = def:
             |                         ^
          895|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/n2hszn7p77406si50ghhzdxglc794262-source/nixos/common.nix:109:20:

          108|
          109|       assertions = flatten (flip mapAttrsToList cfg.users (user: config:
             |                    ^
          110|         flip map config.assertions (assertion: {

       … while calling 'flatten'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:186:13:

          185|   */
          186|   flatten = x:
             |             ^
          187|     if isList x

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:188:21:

          187|     if isList x
          188|     then concatMap (y: flatten y) x
             |                     ^
          189|     else [x];

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:188:24:

          187|     if isList x
          188|     then concatMap (y: flatten y) x
             |                        ^
          189|     else [x];

       … while calling 'flatten'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:186:13:

          185|   */
          186|   flatten = x:
             |             ^
          187|     if isList x

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:615:10:

          614|     attrs:
          615|     map (name: f name attrs.${name}) (attrNames attrs);
             |          ^
          616|

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:615:16:

          614|     attrs:
          615|     map (name: f name attrs.${name}) (attrNames attrs);
             |                ^
          616|

       … while calling anonymous lambda

         at /nix/store/n2hszn7p77406si50ghhzdxglc794262-source/nixos/common.nix:109:66:

          108|
          109|       assertions = flatten (flip mapAttrsToList cfg.users (user: config:
             |                                                                  ^
          110|         flip map config.assertions (assertion: {

       … from call site

         at /nix/store/n2hszn7p77406si50ghhzdxglc794262-source/nixos/common.nix:110:9:

          109|       assertions = flatten (flip mapAttrsToList cfg.users (user: config:
          110|         flip map config.assertions (assertion: {
             |         ^
          111|           inherit (assertion) assertion;

       … while calling 'flip'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/trivial.nix:138:16:

          137|   */
          138|   flip = f: a: b: f b a;
             |                ^
          139|

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/types.nix:563:22:

          562|       merge = loc: defs:
          563|         mapAttrs (n: v: v.value) (filterAttrs (n: v: v ? value) (zipAttrsWith (name: defs:
             |                      ^
          564|             (mergeDefinitions (loc ++ [name]) elemType defs).optionalValue

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:844:59:

          843|       if isDefined then
          844|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |                                                           ^
          845|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while calling 'merge'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/types.nix:878:22:

          877|         check = x: isAttrs x || isFunction x || path.check x;
          878|         merge = loc: defs:
             |                      ^
          879|           (base.extendModules {

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:242:28:

          241|           # For definitions that have an associated option
          242|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                            ^
          243|

       … while calling 'mapAttrsRecursiveCond'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/attrsets.nix:696:5:

          695|     # Attribute set to recursively map over.
          696|     set:
             |     ^
          697|     let

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:234:33:

          233|           ({ inherit lib options config specialArgs; } // specialArgs);
          234|         in mergeModules prefix (reverseList collected);
             |                                 ^
          235|

       … while calling 'reverseList'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/lists.nix:510:17:

          509|   */
          510|   reverseList = xs:
             |                 ^
          511|     let l = length xs; in genList (n: elemAt xs (l - n - 1)) l;

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:229:25:

          228|       merged =
          229|         let collected = collectModules
             |                         ^
          230|           class

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:443:37:

          442|
          443|     in modulesPath: initialModules: args:
             |                                     ^
          444|       filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:444:7:

          443|     in modulesPath: initialModules: args:
          444|       filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);
             |       ^
          445|

       … while calling 'filterModules'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:411:36:

          410|       # modules recursively. It returns the final list of unique-by-key modules
          411|       filterModules = modulesPath: { disabled, modules }:
             |                                    ^
          412|         let

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:437:31:

          436|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          437|           keyFilter = filter (attrs: ! elem attrs.key disabledKeys);
             |                               ^
          438|         in map (attrs: attrs.module) (builtins.genericClosure {

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:398:22:

          397|           let
          398|             module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                      ^
          399|             collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling anonymous lambda

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:363:11:

          362|         else
          363|           m: m;
             |           ^
          364|

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:398:35:

          397|           let
          398|             module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                                   ^
          399|             collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling 'loadModule'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:334:53:

          333|       # Like unifyModuleSyntax, but also imports paths and calls functions if necessary
          334|       loadModule = args: fallbackFile: fallbackKey: m:
             |                                                     ^
          335|         if isFunction m then

       … from call site

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/modules.nix:335:12:

          334|       loadModule = args: fallbackFile: fallbackKey: m:
          335|         if isFunction m then
             |            ^
          336|           unifyModuleSyntax fallbackFile fallbackKey (applyModuleArgs fallbackKey m args)

       … while calling 'isFunction'

         at /nix/store/pixkna3czp2zzq6k5wy3zh5acd59xn9w-source/lib/trivial.nix:448:16:

          447|   */
          448|   isFunction = f: builtins.isFunction f ||
             |                ^
          449|     (f ? __functor && isFunction (f.__functor f));

       error: value is a Boolean while a set was expected
